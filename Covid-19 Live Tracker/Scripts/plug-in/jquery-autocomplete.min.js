!function(t,e,i){var n=/[\-\[\]{}()*+?.,\\\^$|#\s]/g,s="autocomplete",o="."+s,l={INPUT:"input"+o,CLICK:"click"+o,CLEAN:"clean"+o,KEYDOWN:"keydown"+o,DESTROY:"destroy"+o,SELECTED:"selected"+o,CLOSED:"closed"+o},c={items:[],maxItems:5,value:"value",text:"value",itemActiveClass:s+"-active",itemHighlightTemplate:'<b class="font-weight-bold">$&</b>',tagItemsContainer:"div",tagItemsClass:s+"-items",tagItemsIdSuffix:"-"+s+"-list",tagItemContainer:"div",tagItemClass:s+"-item",caseSensitive:!1,enableCloseOnClickOutside:!0,calculatePosition:!0,width:null,offsetTop:10,offsetLeft:0};function r(t,i){this.$element=e(t),this.config=this._getConfig(i),this.currentFocus,this.idContainer="#"+t.id+this.config.tagItemsIdSuffix,this._setListeners()}var a=r.prototype;a.value=function(t){return t=t||this.selected(),this._result(t,this.config.value,t)},a.text=function(t){return t=t||this.selected(),this._result(t,this.config.text,t)},a.selected=function(t){var i,n=this;return t&&(this._selected=null,(i=e.grep(this.config.items,function(e){return n.value(t)===n.value(e)||n.text(t)===n.text(e)}))&&i.length&&(this._selected=i[0]),this._selected&&this.$element.val(this.text(this._selected)).trigger(l.SELECTED,[this.value(this._selected),this.text(this._selected)])),this._selected},a.clean=function(){var t=this._selected;return this._selected=null,this.$element.val(this.text(this._selected)).trigger(l.CLEAN),t},a.close=function(){e(this.idContainer).remove(),this.$element.trigger(l.CLOSED)},a.closeAll=function(t){var i=this;e("."+this.config.tagItemsClass).each(function(){t!=this&&t!=i.$element[0]&&e(this).remove()})},a.destroy=function(){var t=this;this.$element.trigger(l.DESTROY),e.each(l,function(e,i){t.$element.off(i)}),this.$element.removeData(s)},a._getConfig=function(t){var i=e.extend({},e.fn.autocomplete.Defaults,this.$element.data(),t||{});return"string"==typeof i.items&&(i.items=i.items.split(",")),"string"==typeof i.maxItems&&(i.maxItems=Number(i.maxItems)),"string"==typeof i.enableCloseOnClickOutside&&(i.enableCloseOnClickOutside="true"===i.enableCloseOnClickOutside||"1"===i.enableCloseOnClickOutside),i},a._setListeners=function(){var i=this;this.$element.on(l.INPUT,function(t){var e=this.value;if(i.closeAll(),!e)return!1;i.currentFocus=-1,i._showItemsFilter(e)}),this.$element.on(l.KEYDOWN,function(t){var n=e(i.idContainer+" "+i.config.tagItemContainer);40==t.keyCode?(i.currentFocus++,i._addActive(n)):38==t.keyCode?(i.currentFocus--,i._addActive(n)):13==t.keyCode&&(t.preventDefault(),i.currentFocus>-1&&n.length&&n[i.currentFocus].click())}),this.config.enableCloseOnClickOutside&&t.addEventListener("click",function(t){i.closeAll(t.target)})},a._showItemsFilter=function(t){var i,n,s,o,l,c=this;for(n=e("<"+this.config.tagItemsContainer+"/>").attr("id",this.idContainer.replace("#","")).addClass(this.config.tagItemsClass),this.config.calculatePosition&&n.css({position:"absolute",left:this.$element.offset().left+this.config.offsetLeft,top:this.$element.offset().top+this.$element.height()+this.config.offsetTop}),this.config.width?n.css("width",this.config.width):n.css("width",this.$element.outerWidth()),n.appendTo(this.$element.parent()),o=this._filterItems(t),i=0;i<o.length;i++)l=this.text(o[i]),(s=e("<"+this.config.tagItemContainer+"/>").addClass(this.config.tagItemClass).html(this._highlight(l,t)).data("value",this.value(o[i])).data("text",l)).on("click",function(t){c.selected(e(this).data("value")),c.close()}),s.appendTo(n)},a._filterItems=function(t){var i=this,n=new RegExp(this._escapeTerm(t),this.config.caseSensitive?null:"i"),s=[];return e.each(this.config.items,function(t,e){if(s.length===i.config.maxItems)return!1;n.test(i.text(e))&&s.push(e)}),s},a._addActive=function(t){if(!t.length)return!1;this._removeActive(t),this.currentFocus>=t.length&&(this.currentFocus=0),this.currentFocus<0&&(this.currentFocus=t.length-1),e(t[this.currentFocus]).addClass(this.config.itemActiveClass)},a._removeActive=function(t){e(t).removeClass(this.config.itemActiveClass)},a._highlight=function(t,e){return t.replace(new RegExp(e+"(?!([^<]+)?<)","gi"),this.config.itemHighlightTemplate)},a._escapeTerm=function(t){return t.replace(n,"\\$&")},a._result=function(t,e,i){let n;return e=e||[],i=void 0===i?null:i,Array.isArray(e)||(e=[e]),e.length?(e.every((e,i)=>{try{n=i?n[e]:t[e]}catch(t){return n=null,!1}return!0}),null==n?i:n):i},function(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=!1,n.configurable=!0,Object.defineProperty(t,n.key,n)}}(r,[{key:"VERSION",get:function(){return"0.1.0"}},{key:"Default",get:function(){return Default}},{key:"NAME",get:function(){return s}},{key:"Event",get:function(){return l}},{key:"EVENT_KEY",get:function(){return o}}]);var u=e.fn.autocomplete;e.fn.autocomplete=function(t,i){return this.each(function(){var n=e(this),o=n.data(s);o||n.data(s,o=new r(this,t)),"string"==typeof t&&o[t].apply(o,Array.isArray(i)?i:[i])})},e.fn.autocomplete.Constructor=r,e.fn.autocomplete.Defaults=c,e.fn.autocomplete.noConflict=function(){return e.fn.autocomplete=u,this},e(t).on("click."+s+".data-api",'[data-provides="'+s+'"]',function(t){var i=e(this);if(!i.data(s)){i.autocomplete(i.data());var n=e(t.target).closest('[data-dismiss="'+s+'"],[data-trigger="'+s+'"]');n.length>0&&(t.preventDefault(),n.trigger(l.CLICK))}})}(document,jQuery);
